<div class="standard-field">
  <div>
    <div *ngIf="!customStandard">
      <div  class="standard-field__title">
        <div>
        <i (click)="toggleVisible()" class="arrow" [ngClass]="{'right': !visible, 'down': visible}"></i>{{applicationStandartResearch.standard.shortName}}
        </div>
        <div *ngIf="isSubTitle" class="standard-field__subtitle">
          {{standardSubTitle}}
        </div>
      </div>
      <mat-icon class="standard-field__icon" (click)="selectProperty()">search</mat-icon>
      <div class="standard-field__divider"></div>
      <mat-icon class="standard-field__close" (click)="removeStandard()">close</mat-icon>
      <div style="clear:both;"></div>
    </div>

    <div *ngIf="customStandard">
      <div class="standard-field__title-custom">
        <i (click)="toggleVisible()" class="arrow" [ngClass]="{'right': !visible, 'down': visible}"></i>
        <editable-field [value]="applicationStandartResearch.customContract.name" (update)="updateCustomContractName($event)"></editable-field>
      </div>
      <mat-icon class="standard-field__icon-custom" (click)="selectProperty()">search</mat-icon>
      <div class="standard-field__divider-custom"></div>
      <mat-icon class="standard-field__close-custom" (click)="removeStandard()">close</mat-icon>
      <div style="clear:both;"></div>
    </div>
  </div>
  <div *ngIf="visible">
    <div *ngIf="!customStandard" click-outside (clickOutside)="onClickOutside($event)" #wrap class="wrapper-tree goods-category-property">
      <tree-root [options]="options" [nodes]="applicationStandartResearch.applicationResearches">
        <ng-template #treeNodeTemplate let-node let-index="index">
          <!-- <div class="toggle" *ngIf="isToggleVisible(node)">
                <color-toggle [value]="node.data.state" (changeNode)="onNodeStateChange($event)"></color-toggle>
          </div>
          <div style="float:left;">{{getTitleForNode(node)}}</div>
          <mat-icon class="close-icon" (click)="removeItem(node)">close</mat-icon>
          <div style="clear:both;"></div> -->
          <product-field [node]="node" (onRemove)="removeItem($event)" [standard]="applicationStandartResearch.standard"></product-field>
        </ng-template>
      </tree-root>
    </div>
    <div *ngIf="customStandard" click-outside (clickOutside)="onClickOutside($event)" #wrap2 class="wrapper-tree-custom">
      <tree-root [options]="options" [nodes]="applicationStandartResearch.applicationResearches">
        <ng-template #treeNodeTemplate let-node let-index="index">
          <product-parameter [config]="node" (onRemove)="removeItem(node)"></product-parameter>
        </ng-template>
      </tree-root>
    </div>
  </div>
</div>
